<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"> 
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>

<style>
/* Mobile screen styles */
@media (max-width: 768px) {
    .drawer {
        width: 0; /* Hide the sidebar by default on mobile */
        padding-top: 20px; /* Adjust padding */
    }

    .navbar-icon {
        display: block; /* Show the hamburger icon */
    }
}

/* Larger screens */
@media (min-width: 769px) {
    .drawer {
        width: 250px; /* Always show the sidebar on larger screens */
    }

    .navbar-icon {
        display: none; /* Hide the hamburger icon on larger screens */
    }
}

.drawer {
    height: 100%; /* Full-screen height */
    width: 0; /* Width is zero to start with */
    position: fixed; /* Fixed position to stay in place */
    z-index: 1; /* Sit on top */
    top: 0; /* Align to the top */
    left: 0; /* Align to the left */
    background-color: white; /* Background color */
    overflow-x: hidden; /* Hide horizontal overflow */
    overflow-y: auto; /* Hide vertical scrollbar by default */
    transition: 0.5s; /* Smooth transition for opening/closing */
    padding-top: 60px; /* Padding from the top */
}

.drawer:hover {
    overflow-y: auto; /* Show scrollbar when hovering */
}

/* List of topics */
.topics-list {
    list-style-type: none; /* Remove default list styling */
    padding: 0; /* Remove padding */
    margin-left: 0; /* Ensure the list aligns with the header */
}

.topics-list li a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 15px;
    color: #818181;
    display: block;
    transition: 0.3s;
}

.topics-list li a:hover {
    color: #f1f1f1;
}

hr {
    border: 0;
    height: 1px;
    background: #d3d3d3; /* Light grey line color */
    margin-bottom: 20px; /* Space after the separator */
}

.topic-link {
    display: inline-block;
    padding: 8px 12px; /* Adjust as needed */
    border-radius: 4px; /* Optional, for rounded corners */
    transition: background-color 0.3s, color 0.3s; /* Smooth transition */
    text-decoration: none; /* Optional, removes underline */
}

.topic-link:hover, .topic-link:focus {
    color: white !important; /* Text color to white on hover/focus */
    background-color: var(--topic-color); /* Background to topic color on hover/focus */
}

.topic-icon {
    height: 24px; /* Or as per your previous setting */
    width: auto;
    vertical-align: middle;
    margin-right: 8px;
}

.profile-section {
    text-align: center; /* Ensure everything in this div is centered */
    padding: 20px; /* Add some padding around the content */
    margin-bottom: 20px; /* Space below the profile section */
}

.profile-link {
    display: block; /* Make the link a block to take full width */
    margin-bottom: 10px; /* Space between the image and the name */
}

.navbar-profile-pic {
    width: 50px; /* Set the size of the profile picture */
    height: 50px; /* Set the size of the profile picture */
    border-radius: 50%; /* Make it circular */
    object-fit: cover; /* Ensure the image covers the entire container */
}

.profile-name {
    font-size: 16px; /* Adjust font size as needed */
    color: #333; /* Text color */
}

.topics-header {
    padding-left: 32px; /* Align with the list items */
    margin-bottom: 10px; /* Space below the header */
}



</style>
</head>
<body>

<!-- Drawer for the community top charts -->
<div id="drawer" class="drawer">
    <!-- Profile Picture and User Links -->
    <div class="profile-section">
        {% if current_user %}
            <a href="{{ url_for('profile') }}" class="profile-link">
                <img src="{{ current_user.profile_pic_url | default('https://via.placeholder.com/50', true) }}" alt="Profile Picture" class="navbar-profile-pic">
            </a>
            <div class="profile-name">{{ current_user.first_name }} {{ current_user.last_name }}</div>
        {% else %}
            <a href="{{ url_for('login') }}" class="{{ 'active' if active_page == 'login' else '' }}">
                <i class="fas fa-sign-in-alt"></i>
                <span>Login</span>
            </a>
        {% endif %}
    </div>
    <!-- Links before the topics -->
    <ul class="topics-list">
        <li><a href="{{ url_for('show_feed') }}"><i class="fas fa-home"></i> Home</a></li>
        <li><a href="{{ url_for('my_messages') }}"><i class="fas fa-envelope"></i> Messages</a></li>
        <li><a href="{{ url_for('create_post') }}"><i class="fas fa-plus"></i> Create Post</a></li>
        
        <!-- <li><a href="{{ url_for('user_leaderboard') }}"><i class="fas fa-trophy"></i> Top Users</a></li> -->
        <!--<li><a href="{{ url_for('user_leaderboard') }}"><i class="fas fa-moon"></i> Dark Mode</a></li> -->
    </ul>
    <!-- Separator line -->
    <hr>
    <!-- Topics list starts here -->
    <div class="community-top-charts">
        <h3 class="topics-header">Anonymous</h3>
        <ul class="topics-list">
            {% for topic in topics if topic.interest_category_id == 1 %}
            <li>
                <a href="{{ url_for('view_community', community_id=topic.community_id) }}" style="--topic-color: {{ topic.color }}; color: {{ topic.color }};" class="topic-link">
                    {% if topic.image_url %}
                        <img src="{{ url_for('static', filename=topic.image_url) }}" alt="{{ topic.name }}" class="topic-icon">
                    {% endif %}
                    {{ topic.name }}
                </a>
            </li>
            {% endfor %}
        </ul>
        <h3 class="topics-header">Topics</h3>
        <ul class="topics-list">
            {% for topic in topics if topic.interest_category_id == 2 %}
            <li>
                <a href="{{ url_for('view_community', community_id=topic.community_id) }}" style="--topic-color: {{ topic.color }}; color: {{ topic.color }};" class="topic-link">
                    {% if topic.image_url %}
                        <img src="{{ url_for('static', filename=topic.image_url) }}" alt="{{ topic.name }}" class="topic-icon">
                    {% endif %}
                    {{ topic.name }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>


<!-- Hamburger menu icon -->
<a href="javascript:void(0);" class="navbar-icon" onclick="toggleDrawer()">
    <i class="fas fa-bars"></i>
</a>

{% block content %}
{% endblock %}

<script>
    function toggleDrawer() {
        var drawer = document.getElementById("drawer");
        drawer.classList.toggle('open');
        drawer.style.width = drawer.classList.contains('open') ? '250px' : '0';
    }

    function adjustDrawerForScreenSize() {
        var drawer = document.getElementById("drawer");
        // Default to sidebar closed on mobile views
        if (window.innerWidth < 769) {
            drawer.classList.remove('open');
            drawer.style.width = '0'; // Hide the sidebar on mobile screens
        } else {
            drawer.classList.add('open');
            drawer.style.width = '250px'; // Show the sidebar on wider screens
        }
    }

    // Listen for window resize events
    window.addEventListener('resize', adjustDrawerForScreenSize);

    // Initial adjustment on page load
    document.addEventListener('DOMContentLoaded', adjustDrawerForScreenSize);
</script>
</body>
</html>

