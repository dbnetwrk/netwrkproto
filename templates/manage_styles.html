{% extends "admin_panel_base.html" %}
{% block content %}
<div class="container mt-5">
    <h2>Manage Writing Styles and Modifiers</h2>
    
    <h3 class="mt-4">Writing Styles</h3>
    <ul class="list-group">
        {% for style in writing_styles %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ style.name }}
            <button class="btn btn-danger btn-sm" onclick="deleteStyle({{ style.id }})">Delete</button>
        </li>
        {% endfor %}
    </ul>
    <form class="mt-3" action="{{ url_for('add_writing_style') }}" method="POST">
        <div class="input-group">
            <input type="text" class="form-control" name="style_name" placeholder="New Writing Style" required>
            <button class="btn btn-primary" type="submit">Add Style</button>
        </div>
    </form>

    <h3 class="mt-5">Style Modifiers</h3>
    <ul class="list-group">
        {% for modifier in style_modifiers %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ modifier.name }}
            <button class="btn btn-danger btn-sm" onclick="deleteModifier({{ modifier.id }})">Delete</button>
        </li>
        {% endfor %}
    </ul>
    <form class="mt-3" action="{{ url_for('add_style_modifier') }}" method="POST">
        <div class="input-group">
            <input type="text" class="form-control" name="modifier_name" placeholder="New Style Modifier" required>
            <button class="btn btn-primary" type="submit">Add Modifier</button>
        </div>
    </form>
</div>

<script>
function deleteStyle(styleId) {
    if (confirm('Are you sure you want to delete this writing style?')) {
        fetch(`/writing_style/${styleId}`, { method: 'DELETE' })
            .then(response => response.json())
            .then(data => {
                if (data.success) location.reload();
                else alert('Failed to delete writing style');
            });
    }
}

function deleteModifier(modifierId) {
    if (confirm('Are you sure you want to delete this style modifier?')) {
        fetch(`/style_modifier/${modifierId}`, { method: 'DELETE' })
            .then(response => response.json())
            .then(data => {
                if (data.success) location.reload();
                else alert('Failed to delete style modifier');
            });
    }
}
{% endblock %}